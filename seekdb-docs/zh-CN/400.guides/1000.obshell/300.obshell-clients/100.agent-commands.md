---

slug: /agent-commands
---

# obshell 代理命令组

本文介绍 obshell 的代理命令组，代理命令组可用于管理 obshell。您可通过在命令中配置 `-h`/`--help` 选项查看命令的帮助信息，如 `obshell agent start -h --seekdb`，其中 `--seekdb` 表示查看适用于 seekdb 的帮助信息。

## obshell agent start

使用该命令可启动 obshell。

```shell
obshell agent start [-P] [--password] [--seekdb] [--base-dir] [-6]

# example
obshell agent start -P 2886 --base-dir /var/lib/oceanbase
```

选项说明见下表：

| 选项名 | 是否必选 | 数据类型 | 默认值 | 说明 |
| --- | --- | --- | --- | --- |
| -P/--port | 否 | int | 2886 | 设置该 obshell 绑定到的端口号。 |
| --password | 否 | string | 无 | 该选项仅用于接管 seekdb 实例，接管时需使用该选项指定 seekdb 实例的 root 用户密码。您也可通过环境变量 `OB_ROOT_PASSWORD` 指定 root 用户密码。 |
| --seekdb | 否 | 无 | 无 | 该选项无需传值，配置即表示命令应用于 seekdb。配置 `--base-dir` 的情况下可不指定 `--seekdb`。 |
| --base-dir | 否 | string | 无 | 指定 obshell 的工作目录，需和对应的 seekdb 实例的工作目录一致。未配置的情况下默认为命令执行的当前目录。 |
|  -6/--use-ipv6 | 否 | 无 | 无 | 该选项无需传值，配置即表示使用 IPv6。  |

## obshell agent stop

使用该命令可停止 obshell。

```shell
obshell agent stop [--port] [--seekdb] [-6]

# example
obshell agent stop --seekdb --port 2886
```

选项说明见下表：

| 选项名 | 是否必选 | 数据类型 | 默认值 | 说明 |
| --- | --- | --- | --- | --- |
| --port | 否 | int | 2886 | 指定 obshell 的端口号。若不想通过该选项指定端口，也可通过环境变量 `OBSHELL_PORT_FOR_SEEKDB` 指定 obshell 端口。 |
| --seekdb | 否 | 无 | 无 | 该选项无需传值，配置即表示命令应用于 seekdb。 |
|  -6/--use-ipv6 | 否 | 无 | 无 | 该选项无需传值，配置即表示使用 IPv6。  |

## obshell agent restart

使用该命令可重启 obshell。

```shell
obshell agent restart [-P] [--password] [--seekdb] [-6]

# example
 obshell agent restart --seekdb --port 2886
```

选项说明见下表：

| 选项名 | 是否必选 | 数据类型 | 默认值 | 说明 |
| --- | --- | --- | --- | --- |
| -P/--port | 否 | int | 2886 | 设置该 obshell 绑定到的端口号。 |
| --password | 否 | string | 无 | 该选项仅用于接管 seekdb 实例，接管时需使用该选项指定 seekdb 实例的 root 用户密码。您也可通过环境变量 `OB_ROOT_PASSWORD` 指定 root 用户密码。  |
| --seekdb | 否 | 无 | 无 | 该选项无需传值，配置即表示命令应用于 seekdb。 |
|  -6/--use-ipv6 | 否 | 无 | 无 | 该选项无需传值，配置即表示使用 IPv6。  |

## obshell agent upgrade

使用该命令可对 obshell 进行升级。

```shell
obshell agent upgrade -d [-V] [-t] [--port] [--seekdb] [-6] [-y] [-v]

# example
obshell agent upgrade -d /home/oceanbase/upgrade/ -V 4.2.2.0-20231224224959 --port 2886 --seekdb
```

选项说明见下表：

| 选项名 | 是否必选 | 数据类型 | 默认值 | 说明 |
| --- | --- | --- | --- | --- |
| -d/--pkg_directory | 是 | string | 无 | 设置升级包的存放路径。 |
| -V/--target_version | 否 | string | 无 | 指定目标版本，需要格式正确，例如 `4.2.2.0` 或者 `4.2.2.0-20231224224959`。不指定则选择 `-d` 选项配置的目录下最高版本的 obshell RPM 包。 |
| -t/--tmp_directory | 否 | string | `${home_path}/upgrade` | 指定升级过程中的临时目录，用于存放下载的安装包及解压安装过程中产生的所有文件。需配置为绝对路径。 |
| --port | 否 | int | 2886 | 指定 obshell 的端口号。若不想通过该选项指定端口，也可通过环境变量 `OBSHELL_PORT_FOR_SEEKDB` 指定 obshell 端口。 |
| --seekdb | 否 | 无 | 无 | 该选项无需传值，配置即表示命令应用于 seekdb。 |
|  -6/--use-ipv6 | 否 | 无 | 无 | 该选项无需传值，配置即表示使用 IPv6。  |
| -y/--yes | 否 | 无 | 无 | 该选项无需传值，配置即表示取消升级操作的二次确认。 |
| -v/--verbose | 否 | 无 | 无 | 该选项无需传值，配置即表示输出详细的执行过程信息。 |
