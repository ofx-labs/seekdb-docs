---

slug: /prepare-servers
---

# 准备服务器

本节主要介绍部署 seekdb 所需要的服务器数量和规格以及服务器的软硬件要求，包括操作系统、BIOS 设置等。

## 服务器配置要求

服务器应满足的最低配置要求如下表所示。

| 部署产品 | 服务器数量 | 最低配置 | 磁盘类型 |
|---------|-----------|-------------|-------------|
| seekdb | 1 台  | 最低要求：CPU 1 核，可用内存 2G |  SSD 存储 |

:::info
  <ul>
    <li>磁盘中日志盘需要内存的 1 倍以上，数据盘要满足目标数据量的存储。</li>
    <li>这里列的资源需求指的是为 seekdb 所预留的资源，而不是服务器本身的全部资源。</li>
  </ul>
:::

## 硬件环境要求

### 内存

运行以下命令，查看内存：

```shell
free -g
```

返回结果如下：

```shell
              total        used        free      shared  buff/cache   available
Mem:            174          38           6           0         129         123
Swap:             0           0           0
```

此处需要保障 available 的 Mem 值足够满足上述 **服务器配置要求** 内的配置，如果不够，可以尝试清理缓存来释放部分资源或者更换服务器。

执行以下命令，清理缓存：

```shell
sudo sysctl -w vm.drop_caches=3
# 或
sudo echo 3 > /proc/sys/vm/drop_caches
```

## 软件环境要求

### 操作系统

#### seekdb 操作系统

支持在下表所示的 Linux 操作系统中安装 seekdb。

|       Linux 操作系统     |    版本   |             服务器架构         |
|-------------------------|-----------|-------------------------------|
| Rocky Linux             |   9   | x86_64（包括海光），ARM_64（鲲鹏、飞腾）|
| Alibaba Cloud Linux     | 2、3   | x86_64（包括海光），ARM_64（鲲鹏、飞腾） |
| 龙蜥 AnolisOS           | 8.6 及以上   | x86_64（包括海光），ARM_64（鲲鹏、飞腾）|
| KylinOS                 | V10         | x86_64（包括海光），ARM_64（鲲鹏、飞腾） |
| 统信 UOS                | V20         | x86_64（包括海光），ARM_64（鲲鹏、飞腾）|
| 中科方德 NFSChina        | 4.0 及以上  | x86_64（包括海光），ARM_64（鲲鹏、飞腾）|
| 浪潮 Inspur kos          | 5.8        | x86_64（包括海光），ARM_64（鲲鹏、飞腾）|
| CentOS / Red Hat Enterprise Linux | 7.x、8.x | x86_64（包括海光），ARM_64（鲲鹏、飞腾）|
| SUSE Enterprise Linux     | 12SP3 及以上 | x86_64（包括海光）|
| Debian                    | 8.3 及以上   | x86_64（包括海光）|
| openEuler                | 20.03 LTS SP1/SP2 和 22.10 LTS | x86_64（包括海光），ARM_64（鲲鹏、飞腾）|
| 凝思 LinxOS | V6.0.99、V6.0.100 | x86_64（包括海光），ARM_64（鲲鹏、飞腾） |

:::info
  操作系统需要配置网络和软件管理器（yum 或 zypper 源）。
:::

#### 查看操作系统

##### Red Hat Enterprise Linux Server 7.X

运行以下命令，查看操作系统信息：

```shell
cat /etc/redhat-release
```

返回结果如下：

```shell
Red Hat Enterprise Linux Server release 7.2 (Maipo)
```

##### CentOS 7.X

运行以下命令，查看操作系统信息：

```shell
cat /etc/redhat-release
```

返回结果如下：

```shell
CentOS Linux release 7.2.1511 (Core)
```

##### Anolis OS 8.X

运行以下命令，查看操作系统信息：

```shell
cat /etc/os-release
```

返回结果如下：

```shell
NAME="Anolis OS"
VERSION="8.2"
ID="anolis"
ID_LIKE="rhel fedora centos"
VERSION_ID="8.2"
PLATFORM_ID="platform:an8"
PRETTY_NAME="Anolis OS 8.2"
ANSI_COLOR="0;31"
HOME_URL="https://openanolis.cn/"
```

##### Unbutu

运行以下命令，查看操作系统信息：

```shell
cat /etc/os-release
```

返回结果如下：

```shell
NAME="Ubuntu"
VERSION="20.04.2 LTS (Focal Fossa)"
ID=ubuntu
ID_LIKE=debian
PRETTY_NAME="Ubuntu 20.04.2 LTS"
VERSION_ID="20.04"
HOME_URL="https://www.ubuntu.com/"
SUPPORT_URL="https://help.ubuntu.com/"
BUG_REPORT_URL="https://bugs.launchpad.net/ubuntu/"
PRIVACY_POLICY_URL="https://www.ubuntu.com/legal/terms-and-policies/privacy-policy"
VERSION_CODENAME=focal
UBUNTU_CODENAME=focal
```

##### Debian9

运行以下命令，查看操作系统信息：

```shell
cat /etc/os-release
```

返回结果如下：

```shell
PRETTY_NAME="Debian GNU/Linux 9 (stretch)"
NAME="Debian GNU/Linux"
VERSION_ID="9"
VERSION="9 (stretch)"
VERSION_CODENAME=stretch
ID=debian
HOME_URL="https://www.debian.org/"
SUPPORT_URL="https://www.debian.org/support"
BUG_REPORT_URL="https://bugs.debian.org/"
```

#### 查看内核

查看服务器内核信息，确保操作系统为 3.10.0 及以上，同时根据内核信息，选择对应的部署安装包。

运行以下命令，查看内核信息：

```shell
uname -a
```

### seekdb 服务器 BIOS 设置

#### BIOS 需要关闭以下选项

* Cstate

* Pstate

* EIST

* Power saving

#### BIOS 需要配置以下选项

* Automatic Power on After Power Loss: Always on

* Intel Virtualization Technology：开启

* Hyper-threading：开启

* Hardware prefetcher：开启

* VT-d：开启

* SR-IOV：开启

* Turbo Mode：开启

* Energy performance：开启最大 performance

  :::info
    不同的服务器修改 BIOS 的方式不同，具体操作请参见服务器操作手册。
  :::
