---

slug: /basic-sql-operations
---

# 体验 SQL 基础操作

本节主要介绍 seekdb 的一些 SQL 基本操作。

## 创建数据库

使用 `CREATE DATABASE` 语句创建数据库。

示例：创建数据库 `db1`，指定字符集为 `utf8mb4`，并创建读写属性。

```shell
CREATE DATABASE db1 DEFAULT CHARACTER SET utf8mb4 READ WRITE;
```

```shell
Query OK, 1 row affected
```

更多 `CREATE DATABASE` 语句相关的语法说明，请参见 [CREATE DATABASE](https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000002017062) 章节。

创建完成后，可以通过 `SHOW DATABASES` 命令查看当前数据库服务器中所有的数据库。

```shell
SHOW DATABASES;
```

```shell
+--------------------+
| Database           |
+--------------------+
| db1                |
| information_schema |
| mysql              |
| oceanbase          |
| sys_external_tbs   |
| test               |
+--------------------+
6 rows in set
```

## 表操作

在 seekdb 中，表是最基础的数据存储单元，包含了所有用户可以访问的数据，每个表包含多行记录，每个记录由多个列组成。本节主要提供数据库中表的创建、查看、修改和删除的语法和示例。

### 创建表

使用 `CREATE TABLE` 语句在数据库中创建新表。

示例：在数据库 `db1` 中创建表 `test`。

切换到数据库 `db1`。

```shell
USE db1;
Database changed
```

创建表。

```shell
CREATE TABLE test (c1 INT PRIMARY KEY, c2 VARCHAR(3));
```

```shell
Query OK, 0 rows affected
```

更多 `CREATE TABLE` 语句相关的语法说明，请参见 [CREATE TABLE](https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000002017069) 章节。

### 查看表

使用 `SHOW CREATE TABLE` 语句查看建表语句。

示例：

* 查看表 `test` 的建表语句。

  ```shell
  SHOW CREATE TABLE test\G
  ```

  ```shell
  *************************** 1. row ***************************
        Table: test
  Create Table: CREATE TABLE `test` (
    `c1` int(11) NOT NULL,
    `c2` varchar(3) DEFAULT NULL,
    PRIMARY KEY (`c1`)
  ) ORGANIZATION INDEX DEFAULT CHARSET = utf8mb4 ROW_FORMAT = DYNAMIC COMPRESSION = 'zstd_1.3.8' REPLICA_NUM = 1 BLOCK_SIZE = 16384 USE_BLOOM_FILTER = FALSE ENABLE_MACRO_BLOCK_BLOOM_FILTER = FALSE TABLET_SIZE = 134217728 PCTFREE = 0
  1 row in set
  ```

* 使用 `SHOW TABLES` 语句查看 `db1` 数据库中的所有表。

  ```shell
  SHOW TABLES FROM db1;
  ```

  ```shell
  +---------------+
  | Tables_in_db1 |
  +---------------+
  | test          |
  +---------------+
  1 row in set
  ```

### 修改表

使用 `ALTER TABLE` 语句来修改已存在的表的结构，包括修改表及表属性、新增列、修改列及属性、删除列等。

示例：

* 将表 `test` 的字段 `c2` 改名为 `c3`，并同时修改其字段类型。

  ```shell
  DESCRIBE test;
  ```

  ```shell
  +-------+------------+------+-----+---------+-------+
  | Field | Type       | Null | Key | Default | Extra |
  +-------+------------+------+-----+---------+-------+
  | c1    | int(11)    | NO   | PRI | NULL    |       |
  | c2    | varchar(3) | YES  |     | NULL    |       |
  +-------+------------+------+-----+---------+-------+
  2 rows in set
  ```

  ```shell
  ALTER TABLE test CHANGE COLUMN c2 c3 CHAR(10);
  ```

  ```shell
  Query OK, 0 rows affected
  ```

  ```shell
  DESCRIBE test;
  ```

  ```shell
  +-------+----------+------+-----+---------+-------+
  | Field | Type     | Null | Key | Default | Extra |
  +-------+----------+------+-----+---------+-------+
  | c1    | int(11)  | NO   | PRI | NULL    |       |
  | c3    | char(10) | YES  |     | NULL    |       |
  +-------+----------+------+-----+---------+-------+
  2 rows in set
  ```

* 在表 `test` 中增加、删除列。

  ```shell
  DESCRIBE test;
  ```

  ```shell
  +-------+----------+------+-----+---------+-------+
  | Field | Type     | Null | Key | Default | Extra |
  +-------+----------+------+-----+---------+-------+
  | c1    | int(11)  | NO   | PRI | NULL    |       |
  | c3    | char(10) | YES  |     | NULL    |       |
  +-------+----------+------+-----+---------+-------+
  2 rows in set
  ```

  ```shell
  ALTER TABLE test ADD c4 int;
  ```

  ```shell
  Query OK, 0 rows affected
  ```

  ```shell
  DESCRIBE test;
  ```

  ```shell
  +-------+----------+------+-----+---------+-------+
  | Field | Type     | Null | Key | Default | Extra |
  +-------+----------+------+-----+---------+-------+
  | c1    | int(11)  | NO   | PRI | NULL    |       |
  | c3    | char(10) | YES  |     | NULL    |       |
  | c4    | int(11)  | YES  |     | NULL    |       |
  +-------+----------+------+-----+---------+-------+
  3 rows in set
  ```

  ```shell
  ALTER TABLE test DROP c3;
  ```

  ```shell
  Query OK, 0 rows affected
  ```

  ```shell
  DESCRIBE test;
  ```

  ```shell
  +-------+---------+------+-----+---------+-------+
  | Field | Type    | Null | Key | Default | Extra |
  +-------+---------+------+-----+---------+-------+
  | c1    | int(11) | NO   | PRI | NULL    |       |
  | c4    | int(11) | YES  |     | NULL    |       |
  +-------+---------+------+-----+---------+-------+
  2 rows in set
  ```

更多 `ALTER TABLE` 语句相关的语法说明，请参见 [ALTER TABLE](https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000002017015) 章节。

### 删除表

使用 `DROP TABLE` 语句删除表。

示例：删除表 `test`。

```shell
DROP TABLE test;
```

```shell
Query OK, 0 rows affected
```

更多 `DROP TABLE` 语句相关的语法说明,请参见 [DROP TABLE](https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000002017027) 章节。

## 索引操作

索引是创建在表上并对数据库表中一列或多列的值进行排序的一种结构。其作用主要在于提高查询的速度，降低数据库系统的性能开销。本节主要介绍数据库中索引的创建、查看、删除的语法和示例。

### 创建索引

使用 `CREATE INDEX` 语句创建表的索引。

示例：在表 `test` 中创建索引。

```shell
CREATE TABLE test (c1 INT PRIMARY KEY, c2 VARCHAR(3));
```

```shell
Query OK, 0 rows affected (0.10 sec)
```

```shell
DESCRIBE test;
```

```shell
+-------+------------+------+-----+---------+-------+
| Field | Type       | Null | Key | Default | Extra |
+-------+------------+------+-----+---------+-------+
| c1    | int(11)    | NO   | PRI | NULL    |       |
| c2    | varchar(3) | YES  |     | NULL    |       |
+-------+------------+------+-----+---------+-------+
2 rows in set
```

```shell
CREATE INDEX test_index ON test (c1, c2);
```

```shell
Query OK, 0 rows affected
```

更多 `CREATE INDEX` 语句相关的语法说明，请参见 [CREATE INDEX](https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000002017039) 章节。

### 查看索引

使用 `SHOW INDEX` 语句查看表的索引。

示例：查看表 `test` 中的索引信息。

```shell
SHOW INDEX FROM test\G
```

```shell
*************************** 1. row ***************************
        Table: test
   Non_unique: 0
     Key_name: PRIMARY
 Seq_in_index: 1
  Column_name: c1
    Collation: A
  Cardinality: NULL
     Sub_part: NULL
       Packed: NULL
         Null:
   Index_type: BTREE
      Comment: available
Index_comment:
      Visible: YES
   Expression: NULL
*************************** 2. row ***************************
        Table: test
   Non_unique: 1
     Key_name: test_index
 Seq_in_index: 1
  Column_name: c1
    Collation: A
  Cardinality: NULL
     Sub_part: NULL
       Packed: NULL
         Null:
   Index_type: BTREE
      Comment: available
Index_comment:
      Visible: YES
   Expression: NULL
*************************** 3. row ***************************
        Table: test
   Non_unique: 1
     Key_name: test_index
 Seq_in_index: 2
  Column_name: c2
    Collation: A
  Cardinality: NULL
     Sub_part: NULL
       Packed: NULL
         Null: YES
   Index_type: BTREE
      Comment: available
Index_comment:
      Visible: YES
   Expression: NULL
3 rows in set
```

### 删除索引

使用 `DROP INDEX` 语句删除表的索引。

示例：删除表 `test` 中的索引。

```shell
DROP INDEX test_index ON test;
```

```shell
Query OK, 0 rows affected
```

更多 `DROP INDEX` 语句相关的语法说明，请参见 [DROP INDEX](https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000002017052) 章节。

## 插入数据

使用 `INSERT` 语句在已经存在的表中插入数据。

示例：

* 创建表 `t1` 并插入一行数据。

  创建表 `t1`。
  ```shell
  CREATE TABLE t1(c1 INT PRIMARY KEY, c2 int) PARTITION BY KEY(c1) PARTITIONS 4;
  ```

  ```shell
  Query OK, 0 rows affected
  ```

  查询表 `t1` 中的数据。

  ```shell
  SELECT * FROM t1;
  ```

  插入数据。

  ```shell
  INSERT t1 VALUES(1,1);
  ```

  ```shell
  Query OK, 1 row affected
  ```

  查询数据。

  ```shell
  SELECT * FROM t1;
  ```

  ```shell
  +----+------+
  | c1 | c2   |
  +----+------+
  |  1 |    1 |
  +----+------+
  1 row in set
  ```

* 向表 `t1` 中插入多行数据。

  ```shell
  INSERT t1 VALUES(2,2),(3,default),(2+2,3*4);
  ```

  ```shell
  Query OK, 3 rows affected
  Records: 3  Duplicates: 0  Warnings: 0
  ```

  ```shell
  SELECT * FROM t1;
  ```

  ```shell
  +----+------+
  | c1 | c2   |
  +----+------+
  |  1 |    1 |
  |  2 |    2 |
  |  3 | NULL |
  |  4 |   12 |
  +----+------+
  4 rows in set
  ```

更多 `INSERT` 语句相关的语法，请参见 [INSERT](https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000002017056) 章节。

## 删除数据

使用 `DELETE` 语句删除数据，支持单表删除和多表删除数据。

示例：

* 通过 `CREATE TABLE` 创建表 `t2` 和 `t3`。删除 `c1=2` 的行，其中 `c1` 列为表 `t2` 中的 `PRIMARY KEY`。

  ```shell
  /*表 `t3` 为 `KEY` 分区表，且分区名由系统根据分区命令规则自动生成，即分区名为 `p0`、`p1`、`p2`、`p3`*/
  CREATE TABLE t2(c1 INT PRIMARY KEY, c2 INT);
  ```

  ```shell
  Query OK, 0 rows affected
  ```

  ```shell
  INSERT t2 VALUES(1,1),(2,2),(3,3),(5,5);
  ```

  ```shell
  Query OK, 4 rows affected
  Records: 4  Duplicates: 0  Warnings: 0
  ```

  ```shell
  SELECT * FROM t2;
  ```

  ```shell
  +----+------+
  | c1 | c2   |
  +----+------+
  |  1 |    1 |
  |  2 |    2 |
  |  3 |    3 |
  |  5 |    5 |
  +----+------+
  4 rows in set
  ```

  ```shell
  CREATE TABLE t3(c1 INT PRIMARY KEY, c2 INT) PARTITION BY KEY(c1) PARTITIONS 4;
  ```

  ```shell
  Query OK, 0 rows affected
  ```

  ```shell
  INSERT INTO t3 VALUES(5,5),(1,1),(2,2),(3,3);
  ```

  ```shell
  Query OK, 4 rows affected
  Records: 4  Duplicates: 0  Warnings: 0
  ```

  ```shell
  SELECT * FROM t3;
  ```

  ```shell
  +----+------+
  | c1 | c2   |
  +----+------+
  |  5 |    5 |
  |  1 |    1 |
  |  2 |    2 |
  |  3 |    3 |
  +----+------+
  4 rows in set
  ```

  ```shell
  DELETE FROM t2 WHERE c1 = 2;
  ```

  ```shell
  Query OK, 1 row affected
  ```

  ```shell
  SELECT * FROM t2;
  ```

  ```shell
  +----+------+
  | c1 | c2   |
  +----+------+
  |  1 |    1 |
  |  3 |    3 |
  |  5 |    5 |
  +----+------+
  3 rows in set
  ```

* 删除表 `t2` 中按照 `c2` 列排序之后的第一行数据。

  ```shell
  DELETE FROM t2 ORDER BY c2 LIMIT 1;
  ```

  ```shell
  Query OK, 1 row affected
  ```

  ```shell
  SELECT * FROM t2;
  ```

  ```shell
  +----+------+
  | c1 | c2   |
  +----+------+
  |  3 |    3 |
  |  5 |    5 |
  +----+------+
  2 rows in set
  ```

* 删除表 `t3` 的 `p2` 分区的数据。

  ```shell
  SELECT * FROM t3 PARTITION(p2);
  ```

  ```shell
  +----+------+
  | c1 | c2   |
  +----+------+
  |  1 |    1 |
  |  2 |    2 |
  |  3 |    3 |
  +----+------+
  3 rows in set
  ```

  ```shell
  DELETE FROM t3 PARTITION(p2);
  ```

  ```shell
  Query OK, 3 rows affected
  ```

  ```shell
  SELECT * FROM t3;
  ```

  ```shell
  +----+------+
  | c1 | c2   | 
  +----+------+
  |  5 |    5 |
  +----+------+
  1 row in set
  ```

* 删除 `t2`、`t3` 表中 `t2.c1 = t3.c1` 的数据。

  ```shell
  SELECT * FROM t2;
  ```

  ```shell
  +----+------+
  | c1 | c2   |
  +----+------+
  |  3 |    3 |
  |  5 |    5 |
  +----+------+
  2 rows in set
  ```

  ```shell
  SELECT * FROM t3;
  ```

  ```shell
  +----+------+
  | c1 | c2   | 
  +----+------+
  |  5 |    5 |
  +----+------+
  ```

  ```shell
  DELETE t2, t3 FROM t2, t3 WHERE t2.c1 = t3.c1;
  ```

  上述操作等价于：

  ```shell
  DELETE FROM t2, t3 USING t2, t3 WHERE t2.c1 = t3.c1;
  ```

  ```shell
  SELECT * FROM t2;
  ```

  ```shell
  +----+------+
  | c1 | c2   |
  +----+------+
  |  3 |    3 |
  +----+------+
  1 row in set
  ```

  ```shell
  SELECT * FROM t3;

  ```shell
  Empty set
  ```

更多 `DELETE` 语句相关的语法说明，请参见 [DELETE](https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000002017032) 章节。

## 更新数据

使用 `UPDATE` 语句修改表中的字段值。

示例：

* 通过 `CREATE TABLE` 创建表 `t4` 和 `t5`，将表 `t4` 中 `t4.c1=10` 对应的那一行数据的 `c2` 列值修改为 `100`。

  ```shell
  CREATE TABLE t4(c1 INT PRIMARY KEY, c2 INT);

  ```
  Query OK, 0 rows affected
  ```

  ```shell
  INSERT t4 VALUES(10,10),(20,20),(30,30),(40,40);
  ```

  ```shell
  Query OK, 4 rows affected
  Records: 4  Duplicates: 0  Warnings: 0
  ```

  ```shell
  SELECT * FROM t4;
  ```

  ```shell
  +----+------+
  | c1 | c2   |
  +----+------+
  | 10 |   10 |
  | 20 |   20 |
  | 30 |   30 |
  | 40 |   40 |
  +----+------+
  4 rows in set
  ```

  ```shell
  CREATE TABLE t5(c1 INT PRIMARY KEY, c2 INT) PARTITION BY KEY(c1) PARTITIONS 4;
  ```

  ```shell
  Query OK, 0 rows affected
  ```

  ```shell
  INSERT t5 VALUES(50,50),(10,10),(20,20),(30,30);
  ```

  ```shell
  Query OK, 4 rows affected
  Records: 4  Duplicates: 0  Warnings: 0
  ```

  ```shell
  SELECT * FROM t5;
  ```

  ```shell
  +----+------+
  | c1 | c2   |
  +----+------+
  | 20 |   20 |
  | 10 |   10 |
  | 50 |   50 |
  | 30 |   30 |
  +----+------+
  4 rows in set
  ```

  ```shell
  UPDATE t4 SET t4.c2 = 100 WHERE t4.c1 = 10;
  ```

  ```shell
  Query OK, 1 row affected
  Rows matched: 1  Changed: 1  Warnings: 0
  ```

  ```shell
  SELECT * FROM t4;
  ```

  ```shell
  +----+------+
  | c1 | c2   |
  +----+------+
  | 10 |  100 |
  | 20 |   20 |
  | 30 |   30 |
  | 40 |   40 |
  +----+------+
  4 rows in set
  ```

* 将表 `t4` 中按照 `c2` 列排序的前两行数据的 `c2` 列值修改为 `100`。

  ```shell
  UPDATE t4 set t4.c2 = 100 ORDER BY c2 LIMIT 2;
  ```

  ```
  Query OK, 2 rows affected
  Rows matched: 2  Changed: 2  Warnings: 0
  ```

  ```shell
  SELECT * FROM t4;
  ```

  ```shell
  +----+------+
  | c1 | c2   |
  +----+------+
  | 10 |  100 |
  | 20 |  100 |
  | 30 |  100 |
  | 40 |   40 |
  +----+------+
  4 rows in set
  ```

* 将表 `t5` 中 `p1` 分区的数据中 `t5.c1 > 20` 的对应行数据的 `c2` 列值修改为 `100`。

  ```shell
  SELECT * FROM t5 PARTITION (p1);
  ```

  ```shell
  +----+------+
  | c1 | c2   |
  +----+------+
  | 10 |   10 |
  | 50 |   50 |
  +----+------+
  2 rows in set
  ```

  ```shell
  UPDATE t5 PARTITION(p1) SET t5.c2 = 100 WHERE t5.c1 > 20;
  ```

  ```shell
  Query OK, 1 row affected
  Rows matched: 1  Changed: 1  Warnings: 0
  ```

  ```
  SELECT * FROM t5 PARTITION(p1);
  ```

  ```shell
  +----+------+
  | c1 | c2   |
  +----+------+
  | 10 |   10 |
  | 50 |  100 |
  +----+------+
  2 rows in set
  ```

* 对于表 `t4` 和表 `t5` 中满足 `t4.c2 = t5.c2` 对应行的数据，将表 `t4` 中的 `c2` 列值修改为 `100`，表 `t5` 中的 `c2` 列值修改为 `200`。

  ```shell
  UPDATE t4,t5 SET t4.c2 = 100, t5.c2 = 200 WHERE t4.c2 = t5.c2;
  ```
  ```shell
  Query OK, 1 row affected 
  Rows matched: 4  Changed: 1  Warnings: 0
  ```

  ```shell
  SELECT * FROM t4;
  ```

  ```shell
  +----+------+
  | c1 | c2   |
  +----+------+
  | 10 |  100 |
  | 20 |  100 |
  | 30 |  100 |
  | 40 |   40 |
  +----+------+
  4 rows in set
  ```

  ```shell
  SELECT * FROM t5;
  ```

  ```shell
  +----+------+
  | c1 | c2   |
  +----+------+
  | 20 |   20 |
  | 10 |   10 |
  | 50 |  200 |
  | 30 |   30 |
  +----+------+
  4 rows in set
  ```

更多 `UPDATE` 语句相关的语法，请参见 [UPDATE](https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000002017009) 章节。

## 查询数据

使用 `SELECT` 语句查询表中的内容。

示例：

* 通过 `CREATE TABLE` 创建表 `t6`。从表 `t6` 中读取 `name` 的数据。

  ```shell
  CREATE TABLE t6 (id INT, name VARCHAR(50), num INT);
  ```

  ```shell
  Query OK, 0 rows affected
  ```

  ```shell
  INSERT INTO t6 VALUES(1,'a',100),(2,'b',200),(3,'a',50);

  ```shell
  Query OK, 3 rows affected
  Records: 3  Duplicates: 0  Warnings: 0
  ```

  ```shell
  SELECT * FROM t6;
  ```

  ```shell
  +------+------+------+
  | ID   | NAME | NUM  |
  +------+------+------+
  |    1 | a    |  100 |
  |    2 | b    |  200 |
  |    3 | a    |   50 |
  +------+------+------+
  3 rows in set
  ```

  ```shell
  SELECT name FROM t6;
  ```

  ```shell
  +------+
  | NAME |
  +------+
  | a    |
  | b    |
  | a    |
  +------+
  3 rows in set
  ```

* 在查询结果中对 `name` 进行去重处理。

  ```shell
  SELECT DISTINCT name FROM t6;
  ```

  ```shell
  +------+
  | NAME |
  +------+
  | a    |
  | b    |
  +------+
  2 rows in set
  ```

* 从表 `t6` 中根据筛选条件 `name = 'a'`，输出对应的 `id` 、`name` 和 `num`。

  ```shell
  SELECT id, name, num FROM t6 WHERE name = 'a';
  ```

  ```shell
  +------+------+------+
  | ID   | NAME | NUM  |
  +------+------+------+
  |    1 | a    |  100 |
  |    3 | a    |   50 |
  +------+------+------+
  2 rows in set
  ```

更多 `SELECT` 语句相关的语法说明，请参见 [SELECT](https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000002017573) 章节。

## 提交事务

使用 `COMMIT` 语句提交事务。

在提交事务（COMMIT）之前：

* 您的修改只对当前会话可见，对其他数据库会话均不可见。
* 您的修改没有持久化，您可以通过 ROLLBACK 语句撤销修改。

在提交事务（COMMIT）之后：

* 您的修改对所有数据库会话可见。
* 您的修改持久化成功，不能通过 ROLLBACK 语句回滚修改。

示例：通过 `CREATE TABLE` 创建表 `t_insert`。使用 `COMMIT` 语句提交事务。

```shell
CREATE TABLE t_insert(
    id number NOT NULL PRIMARY KEY,
    name varchar(10) NOT NULL, 
    value number,
    gmt_create DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
 );
```
```shell
Query OK, 0 rows affected
```

```shell
BEGIN;
```
```shell
Query OK, 0 rows affected
```

```shell
INSERT INTO t_insert(id, name, value, gmt_create) VALUES(1,'CN',10001, current_timestamp),(2,'US',10002, current_timestamp),(3,'EN',10003, current_timestamp);
```

```shell
Query OK, 3 rows affected
Records: 3  Duplicates: 0  Warnings: 0
```

```shell
SELECT * FROM t_insert;
```

```shell
+----+------+-------+---------------------+
| id | name | value | gmt_create          |
+----+------+-------+---------------------+
|  1 | CN   | 10001 | 2025-11-07 16:01:53 |
|  2 | US   | 10002 | 2025-11-07 16:01:53 |
|  3 | EN   | 10003 | 2025-11-07 16:01:53 |
+----+------+-------+---------------------+
3 rows in set
```

```shell
INSERT INTO t_insert(id,name) VALUES(4,'JP');
```

```shell
Query OK, 1 row affected
```

```shell
COMMIT;
```

```
Query OK, 0 rows affected
```

```
exit;
```

```shell
mysql -h127.0.0.1 -uroot -P2881 -Ddb1
```

```shell
SELECT * FROM t_insert;
```

```shell
+------+------+-------+---------------------+
| id   | name | value | gmt_create          |
+------+------+-------+---------------------+
|    1 | CN   | 10001 | 2025-11-07 16:01:53 |
|    2 | US   | 10002 | 2025-11-07 16:01:53 |
|    3 | EN   | 10003 | 2025-11-07 16:01:53 |
|    4 | JP   |  NULL | 2025-11-07 16:02:02 |
+------+------+-------+---------------------+
4 rows in set
```

更多事务控制语句相关的说明，请参见 [事务管理概述](https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000002013248)。

## 回滚事务

使用 `ROLLBACK` 语句回滚事务。

回滚一个事务指将事务的修改全部撤销。可以回滚当前整个未提交的事务，也可以回滚到事务中任意一个保存点。如果要回滚到某个保存点，必须结合使用 `ROLLBACK` 和 `TO SAVEPOINT` 语句。
其中：

* 如果回滚整个事务，则：

  * 事务会结束
  * 所有的修改会被丢弃
  * 清除所有保存点
  * 释放事务持有的所有锁

* 如果回滚到某个保存点，则：

  * 事务不会结束
  * 保存点之前的修改被保留，保存点之后的修改被丢弃
  * 清除保存点之后的保存点（不包括保存点自身）
  * 释放保存点之后事务持有的所有锁

示例：回滚事务的全部修改。

```shell
SELECT * FROM t_insert;
```

```shell
+------+------+-------+---------------------+
| id   | name | value | gmt_create          |
+------+------+-------+---------------------+
|    1 | CN   | 10001 | 2025-11-07 16:01:53 |
|    2 | US   | 10002 | 2025-11-07 16:01:53 |
|    3 | EN   | 10003 | 2025-11-07 16:01:53 |
|    4 | JP   |  NULL | 2025-11-07 16:02:02 |
+------+------+-------+---------------------+
4 rows in set
```

```shell
BEGIN;
```

```shell
Query OK, 0 rows affected
```

```shell
INSERT INTO t_insert(id, name, value) VALUES(5,'JP',10004),(6,'FR',10005),(7,'RU',10006);
```

```shell
Query OK, 3 rows affected
Records: 3  Duplicates: 0  Warnings: 0
```

```shell
SELECT * FROM t_insert;
```

```shell
+------+------+-------+---------------------+
| id   | name | value | gmt_create          |
+------+------+-------+---------------------+
|    1 | CN   | 10001 | 2025-11-07 16:01:53 |
|    2 | US   | 10002 | 2025-11-07 16:01:53 |
|    3 | EN   | 10003 | 2025-11-07 16:01:53 |
|    4 | JP   |  NULL | 2025-11-07 16:02:02 |
|    5 | JP   | 10004 | 2025-11-07 16:04:14 |
|    6 | FR   | 10005 | 2025-11-07 16:04:14 |
|    7 | RU   | 10006 | 2025-11-07 16:04:14 |
+------+------+-------+---------------------+
7 rows in set
```

```shell
ROLLBACK;
```

```shell
Query OK, 0 rows affected
```

```shell
SELECT * FROM t_insert;
```

```shell
+------+------+-------+---------------------+
| id   | name | value | gmt_create          |
+------+------+-------+---------------------+
|    1 | CN   | 10001 | 2025-11-07 16:01:53 |
|    2 | US   | 10002 | 2025-11-07 16:01:53 |
|    3 | EN   | 10003 | 2025-11-07 16:01:53 |
|    4 | JP   |  NULL | 2025-11-07 16:02:02 |
+------+------+-------+---------------------+
4 rows in set
```

更多事务控制语句相关的说明，请参见 [事务管理概述](https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000002013248)。

## 创建用户

使用 `CREATE USER` 语句创建用户。

示例:

创建一个用户名为 `test` 的用户。

```shell
CREATE USER 'test' IDENTIFIED BY '******';
```

```shell
Query OK, 0 rows affected
```

更多 `CREATE USER` 语句相关的语法说明，请参见 [CREATE USER](https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000002017000) 章节。

## 授予用户权限

使用 `GRANT` 语句为用户授权相应的权限。

示例：

授予用户 `test` 访问数据库 `db1` 中所有表的权限。

```shell
GRANT SELECT ON db1.* TO test;
```

```shell
Query OK, 0 rows affected
```

检查 `test` 用户的权限。

```shell
SHOW GRANTS for test;
```

```shell
+-----------------------------------+
| Grants for test@%                 |
+-----------------------------------+
| GRANT USAGE ON *.* TO 'test'      |
| GRANT SELECT ON `db1`.* TO 'test' |
+-----------------------------------+
2 rows in set
```

更多 `GRANT` 语句相关的语法说明，请参见 [GRANT](https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000002017008) 章节。

## 删除用户

使用 `DROP USER` 语句删除相应的用户。

示例：

删除 `test` 用户。
     
```shell
DROP USER  test;
```

```shell
Query OK, 0 rows affected
```

更多 `DROP USER` 语句相关的语法说明，请参见 [DROP USER](https://www.oceanbase.com/docs/common-oceanbase-database-cn-1000000002017002) 章节。
