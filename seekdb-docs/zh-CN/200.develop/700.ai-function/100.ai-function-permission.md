---

slug: /ai-function-permission
---

# AI 函数调用权限

本文档介绍 `ACCESS AI MODEL` 模型调用权限。`ACCESS AI MODEL` 权限用于调用 AI 函数，包含 `AI_COMPLETE`、`AI_EMBED`、`AI_RERANK`、`AI_PROMPT` 四个函数。

## 前提条件

要调用 AI 函数，需要确保用户已拥有 `AI MODEL` 相关权限。因为注册 AI 模型和端点依赖 `AI MODEL` 相关权限，注册了相应 AI 模型和端点后，才能调用 AI 函数。`AI MODEL` 相关权限的说明和使用请参见 [模型权限管理](../400.llm/200.model-service-permission.md)，模型注册与管理方式请参见 [模型注册与管理](../400.llm/300.model-register-and-manage.md)。

## 语法

授予权限的语法如下：

```sql
GRANT ACCESS AI MODEL ON *.* TO 'username'@'host';
```

撤销权限的语法如下：

```sql
REVOKE ACCESS AI MODEL ON *.* FROM 'username'@'host';
```

## 示例

1. 调用 `AI_COMPLETE` 函数

    ```sql
    SELECT AI_COMPLETE("ob_complete","你是一个翻译大师，请将以下文本翻译成英文：{{你好世界.}}，输出仅包含翻译结果") as ans;
    ```

    因没有 `ACCESS AI MODEL` 权限，所以报错。

    ```shell
    ERROR 42501: Access denied; you need (at least one of) the access ai model endpoint privilege(s) for this operation
    ```

2. 授予 `test_ai_user` 用户 `ACCESS AI MODEL` 权限

    ```sql
    GRANT ACCESS AI MODEL ON *.* TO test_ai_user@'%';
    ```

3. 验证权限

    ```sql
    SELECT AI_COMPLETE("ob_complete","你是一个翻译大师，请将以下文本翻译成英文：{{你好世界.}}，输出仅包含翻译结果") as ans;
    ```

    执行成功。

    ```sql
    ```shell
    +----------------+
    | ans            |
    +----------------+
    | "Hello world." |
    +----------------+
    1 row in set
    ```