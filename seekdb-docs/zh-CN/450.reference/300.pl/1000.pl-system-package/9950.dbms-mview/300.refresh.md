---
slug: /refresh
---

# REFRESH

`REFRESHE` 用于刷新指定的一个物化视图。

## 语法

```sql
DBMS_MVIEW.REFRESH (
    mv_name             IN    VARCHAR(65535),
    method              IN    VARCHAR(65535) DEFAULT NULL,
    refresh_parallel    IN    INT DEFAULT 0,
    nested              IN    BOOLEAN DEFAULT FALSE,
    nested_refresh_mode IN    VARCHAR DEFAULT NULL
);
```

## 参数解释

:::info

非嵌套物化视图不存在级联刷新行为，指定 `nested` 和 `nested_refresh_mode` 参数无意义，默认独立刷新。
:::

| **参数**     | **说明**                                                                                                       |
|--------------|---------------------------------------------------------------------------------------------------------------|
|mv_name | 需要刷新的物化视图名称。|
| method       | 定义了物化视图的刷新策略，可在创建物化视图时指定默认的策略。可选方法包括：<ul><li>'f' 或 'F'：快速刷新。</li><li>'?'：强制刷新。</li> <li>'C' 或 'c'：全量刷新。</li><li> 'A' 或 'a'：全量刷新。</li></ul>  |
| refresh_parallel  | 刷新操作的并发度，即同时执行刷新操作的线程数。该参数的默认值为 0|
| nested | 指定嵌套物化视图的刷新模式。取值如下：<ul><li>`FALSE`：默认值，表示独立刷新嵌套物化视图。</li><li>`TRUE`：表示级联刷新嵌套物化视图。</li></ul>|
| nested_refresh_mode | 指定级联刷新嵌套物化视图是一致刷新行为还是非一致刷新行为。取值如下：<ul><li>当指定参数 `nested` 为 `FALSE` 时，指定参数 `nested_refresh_mode` 会报错。</li><li>当指定参数 `nested` 为 `TRUE` 时：<ul><li>指定参数 `nested_refresh_mode` 取值如下：  <ul><li>`inconsistent`：表示级联非一致刷新。</li><li>`consistent`：表示级联一致刷新。</li></ul>  </li><li>不指定参数 `nested_refresh_mode` 时默认为级联非一致刷新。</li></ul>  </li></ul> |

## 示例

* 独立刷新模式：

  * 只指定参数 `mv_name`。

    ```sql
    CALL DBMS_MVIEW.REFRESH('mv1');
    ```

  * 指定参数 `mv_name` 及参数 `nested` 值为 `false`。

    ```sql
    CALL DBMS_MVIEW.REFRESH('mv1', nested=> false);
    ```

* 级联非一致刷新模式：

  * 指定参数 `mv_name`，参数 `nested` 值为 `true`，不指定参数 `nested_refresh_mode`。

    ```sql
    CALL DBMS_MVIEW.REFRESH(
        'mv1',   nested=> true);
    ```

  * 指定参数 `mv_name`，参数 `nested` 值为 `true` 及参数 `nested_refresh_mode` 值为 `inconsistent`。

    ```sql
    CALL DBMS_MVIEW.REFRESH(
        'mv1',
        nested=> true,
        nested_refresh_mode => 'inconsistent');
    ```

* 级联一致刷新模式：

  指定参数 `mv_name`，参数 `nested` 值为 `true` 及参数 `nested_refresh_mode` 值为 `consistent`。

  ```sql
  CALL DBMS_MVIEW.REFRESH(
      'mv1',
      nested=> true,
      nested_refresh_mode => 'consistent');
  ```

* 以下为报错场景：

  * 参数 `nested` 值为 `false`，又指定参数 `nested_refresh_mode` 值，报错。

    ```sql
    CALL DBMS_MVIEW.REFRESH(
        'mv1',
        nested=> false,
        nested_refresh_mode => 'xxxx');
    ```

  * 没有指定参数 `nested` 的值，只指定参数 `nested_refresh_mode` 的值，报错。

    ```sql
    CALL DBMS_MVIEW.REFRESH('mv1', nested_refresh_mode => 'xxxx');
    ```

  * 参数 `nested` 值为 `true`，参数 `nested_refresh_mode` 值为非法字符串，报错。

    ```sql
    CALL DBMS_MVIEW.REFRESH(
        'mv1',
        nested=> true,
        nested_refresh_mode => '非法字符串');
    ```
