---
slug: /create-plan-directive
---

# CREATE_PLAN_DIRECTIVE

`CREATE_PLAN_DIRECTIVE` 过程用于创建资源计划指令。

## 语法

```sql
DBMS_RESOURCE_MANAGER.CREATE_PLAN_DIRECTIVE (
    PLAN                      VARCHAR(65535),
    GROUP_OR_SUBPLAN          VARCHAR(65535),
    COMMENT                   VARCHAR(65535) DEFAULT '',
    MGMT_P1                   INT DEFAULT 100,
    UTILIZATION_LIMIT         INT DEFAULT 100,
    MIN_IOPS                  INT DEFAULT 0,
    MAX_IOPS                  INT DEFAULT 100,
    WEIGHT_IOPS               INT DEFAULT 0,
    MAX_NET_BANDWIDTH         INT DEFAULT 100,
    NET_BANDWIDTH_WEIGHT      INT DEFAULT 0);
```

## 参数说明

|        参数        |           说明          |
|-------------------|--------------------------|
| PLAN              | 资源计划的名称。   |
| GROUP_OR_SUBPLAN  | 资源使用组或子计划的名称。    |
| COMMENT           | 对计划指令的注释。   |
| MGMT_P1           | 指定系统满负载情况下，相对可用的最大 CPU 占比。 |
| UTILIZATION_LIMIT  | CPU 资源使用比例上限。该参数的取值范围为 \[0, 100\]。`100` 表示最大可使用 seekdb 的全部 CPU 资源。如果取值为 `20`，则表示最大可使用 seekdb  20% 的 CPU 资源。|
| MIN_IOPS | 指 IO 争用时预留的 IOPS 资源，所有资源组的 `MIN_IOPS` 总和不超过 100，缺省值为 0。 |
| MAX_IOPS |  IOPS 资源上限，所有资源组的 `MAX_IOPS` 总和可以超过 100，缺省值 100。 |
| WEIGHT_IOPS | 在发生 IO 资源争用的情况下的 IOPS 资源权重，所有资源组的 `WEIGHT_IOPS` 总和可以超过 100，并会做归一化，缺省值为 0。 |
| MAX_NET_BANDWIDTH | 指定最大可以使用的网络带宽资源，总和可以超过 100，默认值为 `100`。 |
| NET_BANDWIDTH_WEIGHT | 指定网络带宽的权重值，总和可以超过 100，按比例切分，默认值为 `0`。|

## 示例

* 为资源计划 `DAY` 绑定资源组 `group1`，并指定资源组中 CPU 资源的资源计划指令。

  ```shell
  CALL DBMS_RESOURCE_MANAGER.CREATE_PLAN_DIRECTIVE(
      PLAN=>'DAY',
      GROUP_OR_SUBPLAN=>'group1',
      mgmt_p1=>80,
      utilization_limit=>100);
  ```

* 为资源计划 `daytime` 绑定资源组 `interactive_group`，并指定资源组中 CPU、IOPS、网络带宽等资源的资源计划指令。

  ```shell
  CALL DBMS_RESOURCE_MANAGER.CREATE_PLAN_DIRECTIVE(
      PLAN => 'daytime',
      GROUP_OR_SUBPLAN => 'interactive_group' ,
      MGMT_P1 => 30,
      UTILIZATION_LIMIT =>80,
      MIN_IOPS => 30,
      MAX_IOPS => 90,
      WEIGHT_IOPS => 80,
      MAX_NET_BANDWIDTH => 50,
      NET_BANDWIDTH_WEIGHT => 50);
  ```
