---
sidebar_label: Cline
slug: /cline
---

# seekdb MCP Server 与 Cline 集成

seekdb 提供了向量类型存储、向量索引、embedding 向量搜索的能力。可以将向量化后的数据存储在 seekdb，供下一步的搜索使用。

[Cline](https://cline.bot/) 是一个开源的支持 MCP 协议的 AI 编码助手。

本文使用 Cline，展示如何通过 seekdb MCP Server 快速构建一个后端应用。

## 前提条件

* 您已完成部署 seekdb 数据库。

* 安装 [Python 3.11 及以上版本](https://www.python.org/downloads/) 和相应 [pip](https://pip.pypa.io/en/stable/installation/)。如果您的机器上 Python 版本较低，可以使用 Miniconda 来创建新的 Python 3.11 及以上的环境，具体可参考 [Miniconda 安装指南](https://docs.anaconda.com/miniconda/install/)。

* 安装 Python 包管理器 uv。安装完成后，可使用 `uv --version` 命令验证安装是否成功：

    ```shell
    pip install uv
    uv --version
    ```

* 安装 Cline：

  * 如使用 Visual Studio Code IDE，可在 **扩展** 栏中搜索安装 Cline 插件，插件名称为 `Cline`。

  * 如无 IDE，则参考 [Cline 安装指南](https://docs.cline.bot/getting-started/installing-cline)，下载地址为 [Cline](https://cline.bot/)。

## 步骤一：获取数据库连接信息

联系 seekdb 数据库部署人员或者管理员获取相应的数据库连接串，例如：

```shell
mysql -h$host -P$port -u$user_name -p$password -D$database_name
```

**参数说明：**

* `$host`：提供 seekdb 连接 IP 地址。
* `$port`：提供 seekdb 连接端口，默认是 `2881`。
* `$database_name`：需要访问的数据库名称。

    :::tip
    连接的用户需要拥有该数据库的 `CREATE`、`INSERT`、`DROP` 和 `SELECT` 权限。
    :::

* `$user_name`：提供数据库连接账户。
* `$password`：提供账户密码。

## 步骤二：配置 seekdb MCP Server

这里以 Visual Studio Code 为例，展示如何配置 seekdb MCP Server。

### 安装 seekdb MCP Server

执行下面的命令进行安装：

```shell
pip install seekdb-mcp-server
```

### 配置 seekdb 服务器环境变量到 .env 文件中

在当前目录下创建一个名为 `.env` 的文件，并添加以下内容：

```shell
vi .env

SEEKDB_HOST=localhost      # 数据库主机
SEEKDB_PORT=2881           # 数据库端口（默认：2881）
SEEKDB_USER=your_username
SEEKDB_PASSWORD=your_password
SEEKDB_DATABASE=your_database
```

### 以 SSE 模式启动

```shell
env $(cat .env | xargs) uvx seekdb-mcp-server --transport sse --port 8000 --host 0.0.0.0
```

### 创建 Visual Studio Code 的工作目录

手动在本地创建一个 Visual Studio Code 的工作目录，并用 Visual Studio Code 打开，后面 Cline 生成的文件将放在这个目录下，示例的目录名为 `cline-generate`。

#### 配置大模型

单击侧边栏中的 `Cline 图标`，打开 Cline 对话框，为 Cline 配置大模型：

![2](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/SeekDB/integrations/developer-tools/cline/2.png)

#### 配置 seekdb MCP Server

1. 点击下图所示的 `MCP Servers 图标`。

    ![3](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/SeekDB/integrations/developer-tools/cline/3.png)

2. 填写配置文件，点击确认。

    ```sehll
    {
      "mcpServers": {
        "sse-seekdb": {
          "autoApprove": [],
          "disabled": false,
          "timeout": 60,
          "type": "sse",
          "url": "http://ip:port/sse"
        }
      }
    }
    ```

3. 如配置成功，将显示 `可使用` 状态，并且会显示出 `MCP tools` 和 `resources` 信息，如下所示：

    ![4](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/SeekDB/integrations/developer-tools/cline/4.png)

#### 测试 MCP Server

如下打开 Cline 会话框，输入提示 `How many tables in the test database?` ，Cline 会展示即将执行的 SQL 语句，如果无问题，点击 `Approve` 。Cline 会展示当前 test 库中的表名称，说明可以正常连接 seekdb。

![5](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/SeekDB/integrations/developer-tools/cline/5.png)

### 使用 FastAPI 快速创建 RESTful API 风格的项目

你可以使用 FastAPI 快速创建 RESTful API 风格的项目。FastAPI 是一个 Python 的 Web 框架，可以快速构建 RESTful API。

1. 创建 customer 表

    在对话框中输入提示：`Create a "customer" table with "ID" as the primary key and containing fields such as "name", "age", "telephone", and "location"`，确认 SQL 语句后，点击 `Approve` 按钮执行。 。

    ![6](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/SeekDB/integrations/developer-tools/cline/6.png)

2. 插入测试数据

    在对话框中输入提示：`Insert 10 pieces of data into the customer table`，确认 SQL 语句后，点击 `Approve` 按钮执行：

    ![7](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/SeekDB/integrations/developer-tools/cline/7.png)

3. 创建 FastAPI 项目

    创建 FastAPI 项目 在对话框中输入提示：`Create a FastAPI project on the customer table`，点击 `Approve` 按钮执行。

    ![8](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/SeekDB/integrations/developer-tools/cline/8.png)

    此步骤将自动生成多个文件。建议首次使用时选择"全部接受"，因为 AI 生成的文件内容可能具有不确定性，后续可根据实际需求进行调整。

4. FastAPI 项目配置数据库连接信息

    ![9](https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/doc/img/SeekDB/integrations/developer-tools/cline/9.png)

5. 安装项目依赖

    执行如下命令，安装项目依赖：

    ```shell
    pip install -r requirements.txt
    ```

6. 启动 FastAPI 项目

    执行如下命令，启动 FastAPI 项目：

    ```shell
    source .env
    uvicorn main:app --reload
    ```

7. 查看表中数据

    在命令行中运行如下命令，或者使用其他请求工具，查看表中的数据：

    ```shell
    curl http://127.0.0.1:8000/customers
    ```

    返回结果如下：

    ```json
    [{"name":"John Smith","age":35,"telephone":"13800138001","location":"New York","id":1},{"name":"Sarah Johnson","age":28,"telephone":"13800138002","location":"Los Angeles","id":2},{"name":"Michael Brown","age":42,"telephone":"13800138003","location":"Chicago","id":3},{"name":"Emily Davis","age":31,"telephone":"13800138004","location":"Houston","id":4},{"name":"David Wilson","age":39,"telephone":"13800138005","location":"Phoenix","id":5},{"name":"Lisa Miller","age":26,"telephone":"13800138006","location":"Philadelphia","id":6},{"name":"James Taylor","age":45,"telephone":"13800138007","location":"San Antonio","id":7},{"name":"Jennifer Anderson","age":33,"telephone":"13800138008","location":"San Diego","id":8},{"name":"Robert Thomas","age":37,"telephone":"13800138009","location":"Dallas","id":9},{"name":"Mary Jackson","age":29,"telephone":"13800138010","location":"San Jose","id":10}]
    ```
